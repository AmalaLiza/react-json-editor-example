machine:
  python:
    version: 2.7.3
  node:
    version: 0.12.0


dependencies:
  pre:
    - pip install awsebcli
    - git submodule update --init --recursive
  override:
    - npm install
    - cd vendor/react-json-editor && npm install
  post:
    - cd vendor/react-json-editor && node_modules/.bin/webpack
    - node_modules/.bin/webpack


deployment:
  dev:
    branch: master
    commands:
      - cp static/bundle.js .deploy/app/
      - cd .deploy && eb init -r us-east-1 react-json-editor-example
      - cd .deploy && eb deploy -l $CIRCLE_SHA1
